---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# wildboottestjlr

## Installation

Julia needs to be installed. 

``` r
# clone wildboottestjlr from github
# then 
# devtools::install(path_to_wildboottestjlr)

```
## Example 

To initiate the package, run

```{r}
library(wildboottestjlr)
wildboottestjlr_setup("C:/Users/alexa/AppData/Local/Programs/Julia-1.6.3/bin")
# if WildBootTest.jl is not installed, run 
#wildboottestjlr_setup("C:/Users/alexa/AppData/Local/Program#s/Julia-1.6.3/bin", install_WildBooTestjl = TRUE)

```


This will initiate Julia and load WildBootTest.jl. `wildboottestjlr_setup()` will have to run once for each r session.

The `set_julia_seed()` function allows to set a "global" seed within the Julia session:

```{r}
set_julia_seed(rng = 12313452435)
```

Note: currently, only a method for `lm` is implemented. The `boottest.lm()` method only works for simple cases (one-way clustering, not all of boottest's functionality is currently supported). 

```{r}
data(voters)
lm_fit <- lm(proposition_vote ~ treatment  + log_income, data = voters)
boottest(lm_fit, clustid = "group_id1", B = 999, param = "treatment")

```

How does it compare to ´fwildclusterboot´ ?

```{r}
library(fwildclusterboot)
res <- fwildclusterboot::boottest(lm_fit, clustid = "group_id1", B = 999, param = "treatment")
summary(res)


```

### Tests 

Tests that compare `wildboottestjlr` to `fwildclusterboot` can be found in the "inst" folder.

### Debug

Code to debug `wildbottestjlr::boottest`. If you set all these variables, you can run all code inside the function line by line: 

```{r}
library(wildboottestjlr)
wildboottestjlr_setup("C:/Users/alexa/AppData/Local/Programs/Julia-1.6.3/bin")
set_julia_seed(rng = 12313452435)
data(voters)
lm_fit <- lm(proposition_vote ~ treatment  + log_income + Q1_immigration, data = voters)
boottest(lm_fit, clustid = "group_id1", B = 999, param = "treatment")

object <- lm_fit
clustid <- "group_id1"
param <- "treatment"
B <- 999
bootcluster = c("group_id1", "Q1_immigration")
conf_int = NULL
rng = NULL
R = NULL
beta0 = 0
sign_level = NULL
type = "rademacher"
impose_null = TRUE
p_val_type = "two-tailed"
tol = 1e-6
maxiter = 10
na_omit = TRUE

devtools::load_all("C:/Users/alexa/Dropbox/wildboottestjlr/R")

```


